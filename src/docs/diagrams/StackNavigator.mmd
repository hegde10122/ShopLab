%% File: docs/diagrams/StackNavigator.mmd
%% Portfolio-ready, fully fixed StackNavigator diagram for ShopLab

graph LR
    %% App Entry
    App[App.tsx] --> Stack[StackNavigator]

    %% Navigation Flow
    subgraph NavigationFlow["Navigation Flow"]
        direction LR
        Landing -->|Login| Login
        Landing -->|Register| Register
        Tabs --> Product
        Product --> Checkout
        Checkout --> OrderHistory
    end

    %% Presentation Layer
    subgraph PresentationLayer["Presentation Layer"]
        direction TB
        Landing
        Login
        Register
        ForgotPassword
        Product
        Checkout
        OrderHistory
        Tabs
    end

    %% Domain Layer
    subgraph DomainLayer["Domain Layer - Use Cases / Business Logic"]
        direction TB
        DomainPlaceholder[Domain Logic Placeholder]
    end

    %% Data Layer - fixed labels
    subgraph DataLayer["Data Layer - Repositories / API / DB"]
        direction TB
        AuthRepo["Auth Repository - Firebase Auth"]
        UserRepo["User Repository - Firestore Users"]
        ProductRepo["Product Repository - Firestore Products"]
        OrderRepo["Order Repository - Firestore Orders"]
        StorageService["Storage Service - Firebase Storage"]
    end

    %% Connect layers
    Landing --> DomainPlaceholder
    Login --> DomainPlaceholder
    Register --> DomainPlaceholder
    ForgotPassword --> DomainPlaceholder
    Product --> DomainPlaceholder
    Checkout --> DomainPlaceholder
    OrderHistory --> DomainPlaceholder
    Tabs --> DomainPlaceholder
    DomainPlaceholder --> AuthRepo
    DomainPlaceholder --> UserRepo
    DomainPlaceholder --> ProductRepo
    DomainPlaceholder --> OrderRepo
    DomainPlaceholder --> StorageService

    %% Styling
    classDef presentation fill:#d1e7dd,stroke:#0f5132,stroke-width:1px
    classDef domain fill:#fff3cd,stroke:#664d03,stroke-width:1px
    classDef data fill:#f8d7da,stroke:#842029,stroke-width:1px

    class Landing,Login,Register,ForgotPassword,Product,Checkout,OrderHistory,Tabs presentation
    class DomainPlaceholder domain
    class AuthRepo,UserRepo,ProductRepo,OrderRepo,StorageService data
